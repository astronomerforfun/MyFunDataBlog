pages <- seq(0, 5525, 25)
for(i in pages){
paste("https://www.cloudynights.com/index.php?app=classifieds&do=view_category&category_id=13&sort_key=date_added&sort_order=desc&filter=0&st=",i, sep = "")
}
pages <- seq(0, 5525, 25)
for(i in pages){
print(i)
# paste("https://www.cloudynights.com/index.php?app=classifieds&do=view_category&category_id=13&sort_key=date_added&sort_order=desc&filter=0&st=",i, sep = "")
}
pages <- seq(0, 5525, 25)
for(i in pages){
print(paste("https://www.cloudynights.com/index.php?app=classifieds&do=view_category&category_id=13&sort_key=date_added&sort_order=desc&filter=0&st=",i, sep = ""))
}
urls <- NA
for(i in pages){
urls[i] <- paste("https://www.cloudynights.com/index.php?app=classifieds&do=view_category&category_id=13&sort_key=date_added&sort_order=desc&filter=0&st=",i, sep = ""))
}
for(i in pages){
urls[i] <- paste("https://www.cloudynights.com/index.php?app=classifieds&do=view_category&category_id=13&sort_key=date_added&sort_order=desc&filter=0&st=",i, sep = ""))
}
urls <- NA
for(i in pages){
urls[i] <- paste("https://www.cloudynights.com/index.php?app=classifieds&do=view_category&category_id=13&sort_key=date_added&sort_order=desc&filter=0&st=",i, sep = ""))
}
pages <- seq(0, 150, 25)
urls <- NA
for(i in pages){
urls[i] <- paste("https://www.cloudynights.com/index.php?app=classifieds&do=view_category&category_id=13&sort_key=date_added&sort_order=desc&filter=0&st=",i, sep = "")
}
urls
pages
pages <- seq(0, 150, 25)
urls <- NA
for(i in pages){
urls[i] <- paste("https://www.cloudynights.com/index.php?app=classifieds&do=view_category&category_id=13&sort_key=date_added&sort_order=desc&filter=0&st=",i, sep = "")
}
urls
pages <- as.vector(seq(0, 150, 25))
urls <- NA
for(i in pages){
urls[i] <- paste("https://www.cloudynights.com/index.php?app=classifieds&do=view_category&category_id=13&sort_key=date_added&sort_order=desc&filter=0&st=",i, sep = "")
}
urls
pages <- seq(0, 150, 25)
urls <- NA
for(i in pages){
urls$pages[i] <- paste("https://www.cloudynights.com/index.php?app=classifieds&do=view_category&category_id=13&sort_key=date_added&sort_order=desc&filter=0&st=",i, sep = "")
}
urls
for(i in pages){
urls$pages[i] <- paste("https://www.cloudynights.com/index.php?app=classifieds&do=view_category&category_id=13&sort_key=date_added&sort_order=desc&filter=0&st=",i, sep = "")
}
urls
urls
for(i in pages){
urls$pages <- paste("https://www.cloudynights.com/index.php?app=classifieds&do=view_category&category_id=13&sort_key=date_added&sort_order=desc&filter=0&st=",i, sep = "")
}
for(i in pages){
urls<- paste("https://www.cloudynights.com/index.php?app=classifieds&do=view_category&category_id=13&sort_key=date_added&sort_order=desc&filter=0&st=",i, sep = "")
}
urls
urls<- paste("https://www.cloudynights.com/index.php?app=classifieds&do=view_category&category_id=13&sort_key=date_added&sort_order=desc&filter=0&st=",pages, sep = "")
urls
urls
func <- function(x){
url <- read_html(x)%>%
#Scrape Title
title <- x%>%
html_nodes(".ipsType_subtitle a")%>%
html_text()
#Scrape Price
price <- x%>%
html_nodes("br+ .right")%>%
html_text()
}
func(urls)
test <- func(urls, func)
ref <- read_html(url)
title<- ref%>%
html_nodes(".ipsType_subtitle a")%>%
html_text()
price <- ref%>%
html_nodes("br+ .right")%>%
html_text()
#Scrape Title
title <- x%>%
html_nodes(".ipsType_subtitle a")%>%
html_text()
}
func <- function(url){
ref <- read_html(url)
title<- ref%>%
html_nodes(".ipsType_subtitle a")%>%
html_text()
price <- ref%>%
html_nodes("br+ .right")%>%
html_text()
}
test <- lapply(urls, func)
test
func <- function(url){
ref <- read_html(url)
title<- ref%>%
html_nodes(".ipsType_subtitle a")%>%
html_text()
price <- ref%>%
html_nodes("br+ .right")%>%
html_text()
}
test <- lapply(urls, func)
test <- lapply(urls, func)
test <- lapply(urls, func)
test
test <- sapply(urls, func)
test
func <- function(url){
ref <- read_html(url)
title <-  html_nodes(".ipsType_subtitle a")%>%
html_text()
price <- html_nodes("br+ .right")%>%
html_text()
}
test <- sapply(urls, func)
test <- lapply(urls, func)
func <- function(url){
ref <- read_html(url)
title <-  html_nodes(ref,".ipsType_subtitle a")%>%
html_text()
price <- html_nodes(ref, "br+ .right")%>%
html_text()
}
func <- function(url){
ref <- read_html(url)
title <-  html_nodes(ref,".ipsType_subtitle a")%>%
html_text()
price <- html_nodes(ref, "br+ .right")%>%
html_text()
}
test <- lapply(urls, func)
test
func <- function(url){
ref <- read_html(url)
title <-  html_nodes(ref,".ipsType_subtitle a")%>%
html_text()
# price <- html_nodes(ref, "br+ .right")%>%
#    html_text()
}
test <- lapply(urls, func)
test
func <- function(url){
ref <- read_html(url)
title <-  html_nodes(ref,".ipsType_subtitle a")%>%
html_text()
price <- html_nodes(ref, "br+ .right")%>%
html_text()
df <- cbind(title, price)
return(df)
}
test <- lapply(urls, func)
test
test <- as.data.frame(test)
View(test)
func <- function(url){
ref <- read_html(url)
title <-  html_nodes(ref,".ipsType_subtitle a")%>%
html_text()
price <- html_nodes(ref, "br+ .right")%>%
html_text()
df <- do.call(cbind, c(title, price))
return(df)
}
test <- lapply(urls, func)
func <- function(url){
ref <- read_html(url)
title <-  html_nodes(ref,".ipsType_subtitle a")%>%
html_text()
price <- html_nodes(ref, "br+ .right")%>%
html_text()
df <- data.frame(title, price)
return(df)
}
test <- lapply(urls, func)
test
View(test)
test <- sapply(urls, func)
View(test)
func <- function(url){
ref <- read_html(url)
title <-  html_nodes(ref,".ipsType_subtitle a")%>%
html_text()
price <- html_nodes(ref, "br+ .right")%>%
html_text()
df1 <- cbind(title, price)
df <- do.call(rbind, df1)
return(df)
}
test <- lapply(urls, func)
func <- function(url){
ref <- read_html(url)
title <-  html_nodes(ref,".ipsType_subtitle a")%>%
html_text()
price <- html_nodes(ref, "br+ .right")%>%
html_text()
df1 <- cbind(title, price)
return(df)
}
test <- lapply(urls, func)
View(test)
func <- function(url){
ref <- read_html(url)
title <-  html_nodes(ref,".ipsType_subtitle a")%>%
html_text()
price <- html_nodes(ref, "br+ .right")%>%
html_text()
df1 <- cbind(title, price)
df1 <- data.frame(df1)
return(df1)
}
test <- lapply(urls, func)
test
View(tet)
View(test)
func <- function(url){
ref <- read_html(url)
title <-  html_nodes(ref,".ipsType_subtitle a")%>%
html_text()
price <- html_nodes(ref, "br+ .right")%>%
html_text()
df <- cbind(title, price)
}
test <- lapply(urls, func)
unlist(test)
test_final <- unlist(test)
View(test_final)
test_final <- unlist(test)
View(test_final)
test
func <- function(url){
ref <- read_html(url)
title <-  html_nodes(ref,".ipsType_subtitle a")%>%
html_text()
price <- html_nodes(ref, "br+ .right")%>%
html_text()
df <- data.frame(title = title, price = price)
return(df)
}
test <- lapply(urls, func)
test_final <- unlist(test)
test
View(test)
unlist(test)
func <- function(url){
ref <- read_html(url)
title <-  html_nodes(ref,".ipsType_subtitle a")%>%
html_text()
price <- html_nodes(ref, "br+ .right")%>%
html_text()
df <- data.frame(title = title, price = price, stringsAsFactors = F)
return(df)
}
test <- lapply(urls, func)
unlist(test)
test <- unlist(test)
View(test)
func <- function(url){
ref <- read_html(url)
title <-  html_nodes(ref,".ipsType_subtitle a")%>%
html_text()
price <- html_nodes(ref, "br+ .right")%>%
html_text()
df <- data.frame(title1 = ifelse(length(title) == 0, NA, title),
price1 = ifelse(length(price)== 0, NA, price),
stringsAsFactors = F)
return(df)
}
test <- lapply(urls, func)
test <- unlist(test)
test
View(test)
dim(test)
class(test)
test <- as.data.frame(test)
test
View(test)
test <- sapply(urls, func)
test
View(test)
func <- function(url){
ref <- read_html(url)
title <-  html_nodes(ref,".ipsType_subtitle a")%>%
html_text()
price <- html_nodes(ref, "br+ .right")%>%
html_text()
df <- data.frame(title1 = ifelse(length(title) == 0, NA, title),
price1 = ifelse(length(price)== 0, NA, price),
stringsAsFactors = F)
return(df)
}
test <- lapply(urls, func)
test <- unlist(test)
test <- as.data.frame(test)
View(test)
test
func <- function(url){
ref <- read_html(url)
title <-  html_nodes(ref".ipsType_subtitle a")%>%
html_text()
}
func <- function(url){
ref <- read_html(url)
title <-  html_nodes(ref".ipsType_subtitle a")%>%
html_text()
}
func_for_title <- function(url){
ref <- read_html(url)
title <-  html_nodes(ref".ipsType_subtitle a")%>%
html_text()
}
func_for_title <- function(url){
ref <- read_html(url)
title <-  html_nodes(ref".ipsType_subtitle a")%>%
html_text()
}
func_for_title <- function(url){
ref <- read_html(url)
title <-  html_nodes(ref,".ipsType_subtitle a")%>%
html_text()
}
df <- lapply(urls, func_for_title)
df
View(df)
unlist(df)
df <- unlist(df)
grep("Orion", df)
df[grep("Orion", df),]
df[grep("Orion"),]
grep("Orion", df)
Orion <- grep("Orion", df)
df[Orion,]
df[Orion,]
df[Orion]
Orion <- grep("Orion | EP", df)
df[Orion]
Orion <- grep("Orion | EP | angle", df)
df[Orion]
Orion <- grep("Orion | EP | Angle", df)
df[Orion]
func_for_Views <- function(url){
ref <- read_html(url)
num_views <- html_nodes(ref, "#itemrow_148867 > div.item_info.right > p:nth-child(2)")
}
func_for_Views(urls, func_for_Views())
df2 <- func_for_Views(urls, func_for_Views())
func_for_Views <- function(url){
ref <- read_html(url)
num_views <- html_nodes(ref, "#itemrow_148867 > div.item_info.right > p:nth-child(2)")
}
func_for_Views <- function(url){
ref <- read_html(url)
num_views <- html_nodes(ref, "#itemrow_148867 > div.item_info.right > p:nth-child(2)")%>%
html_text
}
df2 <- func_for_Views(urls, func_for_Views)
df2 <- lapply(urls, func_for_Views)
unlist(df2)
func_for_Views <- function(url){
ref <- read_html(url)
num_views <- html_nodes(ref, "#itemrow_148867 > div.item_info.right > p:nth-child(2)")%>%
html_text()
}
df2 <- lapply(urls, func_for_Views)
unlist(df2)
df2
func_for_Views <- function(url){
ref <- read_html(url)
num_views <- html_nodes(ref, ".ipsType_small+ .ipsType_small")%>%
html_text()
}
df2 <- lapply(urls, func_for_Views)
df2
func_for_Views <- function(url){
ref <- read_html(url)
num_views <- html_nodes(ref, "#itemrow_148809 .ipsType_small+ .ipsType_small")%>%
html_text()
}
df2 <- lapply(urls, func_for_Views)
df2
unlist(df2)
df2 <- unlist(df2)
df2
func_for_Views <- function(url){
ref <- read_html(url)
num_views <- html_nodes(ref, ".ipsType_small")%>%
html_text()
}
df2 <- lapply(urls, func_for_Views)
df2
func_for_Views <- function(url){
ref <- read_html(url)
num_views <- html_nodes(ref, "#itemrow_148809 .ipsType_small+ .ipsType_small")%>%
html_text()
}
df2 <- lapply(urls, func_for_Views)
df2
func_for_Views <- function(url){
ref <- read_html(url)
num_views <- html_nodes(ref, "//*[@id='itemrow_148773']/div[1]/p[2]")%>%
html_text()
}
df2 <- lapply(urls, func_for_Views)
func_for_Views <- function(url){
ref <- read_html(url)
num_views <- html_nodes(ref, "//*[@id='itemrow_148773']/div[1]/p[2]")%>%
html_text()
}
df2 <- lapply(urls, func_for_Views)
func_for_Views <- function(url){
ref <- read_html(url)
num_views <- html_nodes(ref, "//*[(@id = 'itemrow_148734')]")%>%
html_text()
}
df2 <- lapply(urls, func_for_Views)
setwd("~/Dropbox/Scraping/CLOUDY NIGHTS CLASSIFIEDS SCRAPE")
func_for_Views <- function(url){
ref <- read_html(url)
num_views <- html_nodes(css = xpath, "//*[@id='itemrow_148773']/div[1]/p[2]")
html_text()
}
df2 <- lapply(urls, func_for_Views)
func_for_Views <- function(url){
ref <- read_html(url)
ref%>%
num_views <- html_nodes(css = xpath, "//*[@id='itemrow_148773']/div[1]/p[2]")%>%
html_text()
}
df2 <- lapply(urls, func_for_Views)
urls
func_for_Views <- function(url){
ref <- read_html(url)
views <- ref%>%
html_nodes(css = xpath, "//*[@id='itemrow_148773']/div[1]/p[2]")%>%
html_text()
return(views)
}
df2 <- lapply(urls, func_for_Views)
func_for_Views <- function(url){
ref <- read_html(url)
views <- ref%>%
html_nodes(xpath, "//*[@id='itemrow_148773']/div[1]/p[2]")%>%
html_text()
return(views)
}
df2 <- lapply(urls, func_for_Views)
func_for_Views <- function(url){
ref <- read_html(url)
views <- ref%>%
html_nodes(xpath= "//*[@id='itemrow_148773']/div[1]/p[2]")%>%
html_text()
return(views)
}
df2 <- lapply(urls, func_for_Views)
df2
func_for_Views <- function(url){
ref <- read_html(url)
views <- ref%>%
html_nodes(xpath= "//*[@id='itemrow_148773']/div[1]")%>%
html_text()
return(views)
}
df2 <- lapply(urls, func_for_Views)
df2
func_for_Views <- function(url){
ref <- read_html(url)
views <- ref%>%
html_nodes(xpath= "//*[contains(concat( " ", @class, " " ), concat( " ", "row1", " " ))]//*+[contains(concat( " ", @class, " " ), concat( " ", 'ipsType_small', " " ))]//*[contains(concat( " ", @class, " " ), concat( " ", "ipsType_small", " " ))]")%>%
html_text()
return(views)
}
func_for_Views <- function(url){
ref <- read_html(url)
views <- ref%>%
html_nodes(css= ".row1 .ipsType_small+ .ipsType_small")%>%
html_text()
return(views)
}
df2 <- lapply(urls, func_for_Views)
df2
func_for_Views <- function(url){
ref <- read_html(url)
views <- ref%>%
html_nodes(css= ".ipsType_small+ .ipsType_small")%>%
html_text()
return(views)
}
df2 <- lapply(urls, func_for_Views)
df2
df2 <- unlist(df2)
View(df2)
df2
df2 <- as.data.frame(df2)
View(df2)
func_for_date <- function(url){
ref <- read_html(url)
date <- ref%>%
html_nodes(".ipsType_small:nth-child(1)")%>%
html_text()
}
lapply(urls, func_for_date)
df3 <- lapply(urls, func_for_date)
df3
setwd("~/Dropbox/Scraping/CLOUDY NIGHTS CLASSIFIEDS SCRAPE RVEST")
setwd("~/Dropbox/Scraping/CLOUDY NIGHTS CLASSIFIEDS SCRAPE RVEST")
